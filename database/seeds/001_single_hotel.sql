-- 001_single_hotel.sql
-- Deterministic seed for single-hotel MVP
-- PIN hashes are bcrypt of "1234" â€” replace in production

-- Idempotent: skip if hotel already exists
INSERT INTO hotel (id, name)
VALUES ('a0000000-0000-0000-0000-000000000001', 'Choza Hotel')
ON CONFLICT (name) DO NOTHING;

-- Users: one per role
-- PIN for all dev users: 1234
-- bcrypt hash of "1234" with cost 10
-- $2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO
INSERT INTO users (id, hotel_id, username, pin_hash, role, full_name) VALUES
  ('b0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', 'admin',       '$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO', 'ADMIN',          'System Admin'),
  ('b0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', 'manager',     '$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO', 'MAIN_MANAGER',   'Maria Manager'),
  ('b0000000-0000-0000-0000-000000000003', 'a0000000-0000-0000-0000-000000000001', 'frontdesk',   '$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO', 'OPS_MANAGEMENT', 'Frank Frontdesk'),
  ('b0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000001', 'housekeeper1','$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO', 'HOUSEKEEPER',    'Helen Housekeeper'),
  ('b0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000001', 'housekeeper2','$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO', 'HOUSEKEEPER',    'Hugo Housekeeper'),
  ('b0000000-0000-0000-0000-000000000006', 'a0000000-0000-0000-0000-000000000001', 'maint1',     '$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36v1yGb9Rp4/stUsq7M4jCO', 'MAINTENANCE',    'Mike Maintenance')
ON CONFLICT (username) DO NOTHING;

-- Rooms: 10 rooms across two floors
INSERT INTO room (id, hotel_id, room_number, room_type, is_vacant, is_cleaned) VALUES
  ('c0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', '101', 'Standard',  true,  false),
  ('c0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', '102', 'Standard',  true,  false),
  ('c0000000-0000-0000-0000-000000000003', 'a0000000-0000-0000-0000-000000000001', '103', 'Standard',  false, true),
  ('c0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000001', '104', 'Deluxe',    true,  true),
  ('c0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000001', '105', 'Deluxe',    false, true),
  ('c0000000-0000-0000-0000-000000000006', 'a0000000-0000-0000-0000-000000000001', '201', 'Standard',  true,  false),
  ('c0000000-0000-0000-0000-000000000007', 'a0000000-0000-0000-0000-000000000001', '202', 'Standard',  true,  true),
  ('c0000000-0000-0000-0000-000000000008', 'a0000000-0000-0000-0000-000000000001', '203', 'Suite',     false, true),
  ('c0000000-0000-0000-0000-000000000009', 'a0000000-0000-0000-0000-000000000001', '204', 'Suite',     true,  false),
  ('c0000000-0000-0000-0000-000000000010', 'a0000000-0000-0000-0000-000000000001', '205', 'Deluxe',    true,  false)
ON CONFLICT (hotel_id, room_number) DO NOTHING;

-- Sample assignments for today (rooms that are vacant & not cleaned)
INSERT INTO room_assignment (id, hotel_id, room_id, housekeeper_id, assigned_by, assigned_date, status) VALUES
  ('d0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000001', 'b0000000-0000-0000-0000-000000000004', 'b0000000-0000-0000-0000-000000000003', CURRENT_DATE, 'ASSIGNED'),
  ('d0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000002', 'b0000000-0000-0000-0000-000000000004', 'b0000000-0000-0000-0000-000000000003', CURRENT_DATE, 'ASSIGNED'),
  ('d0000000-0000-0000-0000-000000000003', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000006', 'b0000000-0000-0000-0000-000000000005', 'b0000000-0000-0000-0000-000000000003', CURRENT_DATE, 'ASSIGNED'),
  ('d0000000-0000-0000-0000-000000000004', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000009', 'b0000000-0000-0000-0000-000000000005', 'b0000000-0000-0000-0000-000000000003', CURRENT_DATE, 'ASSIGNED'),
  ('d0000000-0000-0000-0000-000000000005', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000010', 'b0000000-0000-0000-0000-000000000005', 'b0000000-0000-0000-0000-000000000003', CURRENT_DATE, 'ASSIGNED')
ON CONFLICT DO NOTHING;

-- Sample maintenance task
INSERT INTO maintenance_task (id, hotel_id, room_id, priority, status, description, created_by) VALUES
  ('e0000000-0000-0000-0000-000000000001', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000003', 'HIGH', 'OPEN', 'Leaking faucet in bathroom', 'b0000000-0000-0000-0000-000000000003'),
  ('e0000000-0000-0000-0000-000000000002', 'a0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000008', 'LOW',  'OPEN', 'Replace light bulb in closet', 'b0000000-0000-0000-0000-000000000003')
ON CONFLICT DO NOTHING;
